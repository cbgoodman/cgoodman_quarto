{"title":"City Councilors per 100,000 Residents","markdown":{"yaml":{"title":"City Councilors per 100,000 Residents","date":"2018-07-28","categories":["r","dataviz","cities","local govt"]},"headingText":"read in data","containsRefs":false,"markdown":"\n\n::: {.column-page}\n![City councilors per 100,000 residents.](../../files/img/councilors.png){fig-align=\"center\"}\n:::\n\nCreated in {{< fa brands r-project >}} with `ggplot2`. The relevant code is below.\n\n```R\nlibrary(tidyverse)\n\ncouncil <- read.csv(\"citycouncil.csv\")\n\n# calculate councilors per 100,000 population\ncouncil$pc.council <- council$council/(council$pop17/100000)\n\n# create annotation\nannot <- read.table(text=\n  \"city|number|just|text\n  1.75|4.65|0|Both Nashville & Louisville are consolidated,<br>city-county governments.\n  16.5|2.4|0|Detroit & Fresno are the median city with<br>1.3 councilors per 100,000 residents.\n  32.5|1.4|0|Some of the largest U.S. cities have the<br>fewest councilors per 100,000 residents.\",\n  sep=\"|\", header=TRUE, stringsAsFactors=FALSE)\nannot$text <- gsub(\"<br>\", \"\\n\", annot$text)\n\n# plot\np <- ggplot(data=council,\n  aes(x=reorder(City, -pc.council), y=pc.council, width=0.9))+\n  geom_bar(stat=\"identity\", fill=\"#E69F00\")+\n  #geom_bar(stat=\"identity\", fill=\"#999999\")+\n  scale_y_continuous(breaks=seq(0, 6, by=1))+\n  # read in annotations\n  geom_label(data=annot, aes(x=city, y=number, label=text, hjust=just),\n    family=\"Open Sans Condensed Light\", lineheight=0.95,\n    size=3.5, label.size=0, color=\"#2b2b2b\")+\n  # Theming\n  labs(\n    title=\"Most city council districts in the U.S. are large\",\n    subtitle=\"City councilors per 100,000 residents, 40 largest U.S. cities, 2017\",\n    caption=\"Author: Chris Goodman (@cbgoodman), Data: U.S. Census Bureau & Author's calculations.\",\n    y=NULL,\n    x=NULL) +\n  theme_minimal(base_family=\"Open Sans Condensed Light\") +\n  # light, dotted major y-grid lines only\n  theme(panel.grid=element_line())+\n  theme(panel.grid.major.y=element_line(color=\"#2b2b2b\", linetype=\"dotted\", size=0.15))+\n  theme(panel.grid.major.x=element_blank())+\n  theme(panel.grid.minor.x=element_blank())+\n  theme(panel.grid.minor.y=element_blank())+\n  # light x-axis line only\n  theme(axis.line=element_line())+\n  theme(axis.line.y=element_blank())+\n  theme(axis.line.x=element_blank())+\n  # tick styling\n  theme(axis.ticks=element_line())+\n  theme(axis.ticks.x=element_blank())+\n  theme(axis.ticks.y=element_blank())+\n  theme(axis.ticks.length=unit(5, \"pt\"))+\n  # x-axis labels\n  theme(axis.text.x=element_text(size=10, angle=90, hjust=0.95,vjust=0.2))+\n  # breathing room for the plot\n  theme(plot.margin=unit(rep(0.5, 4), \"cm\"))+\n  # move the y-axis tick labels over a bit\n  #theme(axis.text.y=element_text(margin=margin(r=-5)))+\n  # make the plot title bold and modify the bottom margin a bit\n  theme(plot.title=element_text(family=\"Open Sans Condensed Bold\", margin=margin(b=15)))+\n  # make the subtitle italic\n  theme(plot.subtitle=element_text(family=\"Open Sans Condensed Light Italic\"))+\n  theme(plot.caption=element_text(size=8, hjust=0, margin=margin(t=15)))\n\nggsave(plot=p, \"councilors.png\", width=10, height=6, units=\"in\", dpi=\"retina\")\n```\n\n\nFull code and data can be found [here](https://github.com/cbgoodman/citycouncil).\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"markdown"},"render":{"keep-tex":false,"keep-yaml":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"wrap","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","highlight-style":"github","toc":true,"toc-depth":4,"output-file":"2018-07-28-councilors.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.0.38","author-meta":"Christopher B. Goodman","_quarto-vars":{"years":"2013â€“2022","orcid":"0000-0002-8565-9714","github-url":"https://github.com/cbgoodman/"},"theme":{"light":["cosmo","../../html/style.scss"],"dark":["../../html/style-dark.scss"]},"code-block-bg":false,"date-format":"MMMM D, YYYY","title-block-banner":"#3D5266","toc-title":"Contents","toc-location":"left","author":[{"name":"Christopher B. Goodman","url":"https://www.cgoodman.com","orcid":"0000-0002-8565-9714"}],"quarto-template-params":{"banner-header-class":"blog-post"},"title":"City Councilors per 100,000 Residents","date":"2018-07-28","categories":["r","dataviz","cities","local govt"]},"extensions":{"book":{"multiFile":true}}}}}